### Erying 11gen

Годная сборочка с али, ссылок не будет, не реклама. Адекватная цена до ~13000р. за вариант с i7-11800H или выше (апрель 2023), далее можно рассматривать что-то на обычном i5-12400 и обычной материнке.

ES 11800H отличается от ES 11980HK только разгонным потенциалом. Оба имеют свободный множитель. У первого стабильность на 4.60GHz в среднем, у второго на 4.80GHz. Но в целом от экземпляра зависит.

В списке файлов присутствуют биосы: от Erying 111 и 307, и так называемый графический биос с молниями (10729). Известно, что 307 биос может окирпичить плату, на которой работает биос 111 и наоборот. Также 10729 биос совместим с 111 биосом и кирпичит те платы, на которых работает только 307.

Самое важное что необходимо сделать, решить проблему с перегревом процессора. Какую бы термопасту не использовал между чипом и пластиной, был перегрев. Жидкий металл привёл всё в норму. Т.е. получилось проц > жм > пластина > паста > охлаждение. Перегрева больше нет, 75° в AIDA64 на одной галке Stress FPU.

1. [Если зависает система](#Если-зависает-система)
2. [Работает ли виртуализация](#Работает-ли-виртуализация)
3. [Как настроить TDP](#Как-настроить-TDP)
4. [Как настроить множители](#Как-настроить-множители)
5. [Как сделать андервольт](#Как-сделать-андервольт)
6. [Как включить встроенное видео при использовании видеокарты](#Как-включить-встроенное-видео-при-использовании-видеокарты)
7. [Где взять драйверы](#Где-взять-драйверы)
8. [Как настроить оперативную память](#Как-настроить-оперативную-память)
9. [Как включить ReBAR](#Как-включить-ReBAR)
10. [Если не работает управление RGB на памяти](#Если-не-работает-управление-RGB-на-памяти)
11. [Как прошить программатором](#Как-прошить-программатором)

***[> Telegram группа](https://t.me/russian_xeon_community)***

## Если зависает система

Это выражается в зависании изображения на экране, при этом система продолжает работать. В моём случае это происходило при сочетании высокой нагрузки на процессор с высокой его температурой, через некоторое время. Например от 80° при 60W или от 70° при 90W.

Происходит это только если видеокарта в этот момент использует шину PCI-E в режиме 1.0(1.1). На моей Radeon RX 570 такой проблемы не наблюдается, шина постоянно держится в режиме 3.0. На GeForce RTX 3070 шина в простое падает до 1.1 и проблема может возникнуть.

Зафиксировать нижний предел шины можно через [NVIDIA PMM Tool](https://github.com/Koshak1013/HuananzhiX99_BIOS_mods/blob/master/Erying%2011gen/NVIDIA_PMM_Tool_v2.5.0.120_20230427.zip), в режиме PCI-E 2.0 проблемы нет. Причём вроде как это работает только с серией RTX 30. Если работает на других сериях, пожалуйста, отпишите в [нашей Telegram группе](https://t.me/russian_xeon_community).

Для этого надо запустить NVPMM.exe, на вкладке Control поставить нижнюю галку Adaptive VRAM, указать процесс, при котором это будет работать, например explorer.exe, и минимальную частоту памяти 810МГц. И после этого, например, в [GPU-Z](https://www.techpowerup.com/download/techpowerup-gpu-z/) убедитесь, что минимальный порог поднялся до 2.0. Зависания должны прекратиться.

В целом считается что проблема возникает только в сочетании с NVIDIA. Более красивого решения проблемы на данный момент нет. Если вы нашли более элегантное решение данной проблемы, пожалуйста отпишите в [нашей Telegram группе](https://t.me/russian_xeon_community).

## Работает ли виртуализация

Виртуализация работает, например в VirtualBox и BlueStacks

Но почему-то не работает системный компонент Hyper-V. При активации система перезагружается на этапе загрузки. Помогает выключение виртуализации и последующее отключение Hyper-V в системе. По этой же причине не работает "Изоляция ядра".

Настройка виртуализации - CPU Configuration > Intel (VMX) Virtualization Technology

## Как настроить TDP

Можно настроить TDP, под вашу систему охлаждения, либо вовсе снять лимиты - Power & Performance > CPU - Power Management Control > View/Configure Turbo Options > Power Limit 1 Override > Enabled. Далее вводим в Power Limit 1 и 2 значение желаемого TDP в миливаттах, т.е. для 45W вводим 45000.

## Как настроить множители

В меню Power & Performance > CPU - Power Management Control > View/Configure Turbo Options > Core Turbo Ratio Limit Ratio (TRLR) Override вводим желаемые множители (например, максимальные)

OverClocking Performance Menu > OverClocking Feature > Enabled, далее Processor > Per Core Ratio Override > Enabled, далее вводим множители в Core Max OC Ratio и каждый Core Max Ratio

## Как сделать андервольт

OverClocking Performance Menu > OverClocking Feature > Enabled, далее Processor > Core Voltage Offset Prefix ставим на "-" и в Core Voltage Offset вводим желаемое смещение в миливольтах, например 50

Тестировать стабильность рекомендую в [OCCT](https://www.ocbase.com/) с такими настройками:

    - Вкладка: CPU
    - Набор данных: Большой
    - Режим: Тяжёлый
    - Нагрузка: Переменная
    - Инструкции: SSE (не AVX)
    - Потоки: Авто

## Как включить встроенное видео при использовании видеокарты

System Agent (SA) Configuration > Graphics Configuration > Internal Graphics > Enabled

## Где взять драйверы

На этой страничке [выложены](https://github.com/Koshak1013/HuananzhiX99_BIOS_mods/blob/master/Erying%2011gen/drivers_erying11gen.zip) драйверы для:

    - Intel SMBus (чтобы установить, щёлкаем ПКМ по tigerlakepch-hsystem.inf и выбираем "Установить")

    - остальные неизвестные устройства в Диспетчере устройств (HM570_serialIO.exe)

для встроенной графики актуальный драйвер на [сайте Intel](https://www.intel.ru/content/www/ru/ru/download/726609/intel-arc-iris-xe-graphics-whql-windows.html), а также можно скачать с [TechPowerUp](https://www.techpowerup.com/download/intel-graphics-drivers)

## Как настроить оперативную память

System Agent (SA) Configuration > Memory Configuration > Sets the gear ratio when SAGV is disabled > ставим "1", для достижения лучших показателей задержки, либо "2" для увеличения разгонного потенциала по частоте памяти

System Agent (SA) Configuration > Memory Configuration > Memory > Memory profile, выбираем свой XMP или Custom (ручная настройка)

Custom профиль лучше запускать с напряжением 1.20V, и потом, после успешного старта, при необходимости увеличить напряжение до 1.35V. В противном случае, система может не запуститься сразу на 1.35V.

Для взятия частот выше, чем 3200, может быть необходимо увеличение напряжения Uncore

Мои результаты такие (память 2шт. Crucial Ballistix BL16G32C16U4BL.16FE):

3333MHz 16-18-18-36 / Uncore+50mV

3466MHz 16-18-18-36 / Uncore+100mV

3600MHz 16-19-19-36 / Uncore+170mV (результат в тесте AIDA64 около 56000/52500/53000/62ns)

Стабильность проверяйте в нормальных тестах, например [testmem5 с профилем Extreme1 @anta777](https://github.com/Koshak1013/HuananzhiX99_BIOS_mods/blob/master/TM5.zip)

## Как включить ReBAR

PCI Subsystem Settings > Re-Size BAR Support > Enabled

## Если не работает управление RGB на памяти

Нужно установить драйвер на устройство Intel SMBus

## Как прошить программатором

Если мат.плата смонтирована в корпус, то скорее всего её придётся извлекать, т.к. прищепке программатора будет мешать радиатор хаба, а чтобы его снять, нужно с обратной стороны вытащить защёлки. Будьте аккуратны и не перекашивайте радиатор на хабе, чтобы его не сколоть. Пасту менять не нужно, термопрокладку тоже, т.к. там хороший термоинтерфейс с фазовым переходом.

Также можно избежать всего этого, если модифицировать прищепку, а именно сточить одну из её сторон.

Может быть проблема с ловлей контакта прищепкой, но поймать его можно. Шейте через [NeoProgrammer](https://github.com/Koshak1013/HuananzhiX99_BIOS_mods/blob/master/NeoProgrammer_2.2.0.10.zip).